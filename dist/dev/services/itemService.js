/**
 * Created by cghislai on 29/07/15.
 */
var Item = (function () {
    function Item(params) {
        if (params != undefined) {
            this.id = params.id;
            this.companyId = params.companyId;
            this.reference = params.reference;
            this.model = params.model;
            this.name = params.name;
            this.description = params.description;
            this.currentPrice = params.currentPrice;
        }
    }
    Item.prototype.equals = function (other) {
        if (this.id == undefined || other.id == undefined) {
            return false;
        }
        return this.id == other.id;
    };
    return Item;
})();
exports.Item = Item;
var ItemService = (function () {
    function ItemService() {
    }
    ItemService.prototype.searchItems = function () {
        this.items = [];
        this.fillDefaultItems();
    };
    ItemService.prototype.addItem = function (item) {
        this.items.push(item);
    };
    ItemService.prototype.removeItem = function (item) {
        var oldItems = this.items;
        this.items = [];
        for (var index = 0; index < oldItems.length; index++) {
            var oldItem = oldItems[index];
            if (oldItem.equals(item)) {
                continue;
            }
            this.items.push(oldItem);
        }
    };
    ItemService.prototype.getItems = function () {
        return this.items;
    };
    ItemService.prototype.getItem = function (id) {
        for (var index = 0; index < this.items.length; index++) {
            var item = this.items[index];
            if (item.id == id) {
                return item;
            }
        }
        return null;
    };
    ItemService.prototype.findItems = function (filterValue) {
        var foundItems = [];
        this.items.forEach(function (item) {
            if (item.reference.indexOf(filterValue) == 0) {
                foundItems.push(item);
                return;
            }
            if (item.name.indexOf(filterValue) >= 0) {
                foundItems.push(item);
                return;
            }
        });
        return foundItems;
    };
    ItemService.prototype.fillDefaultItems = function () {
        var allItems = [
            {
                id: 0,
                companyId: 0,
                reference: "BO001",
                model: null,
                name: "Bonnet Minnie",
                description: "Un bonnet à l'effigie de Minnie, la copine de Mickey.",
                currentPrice: 5.9
            },
            {
                id: 1,
                companyId: 0,
                reference: "BO002",
                model: null,
                name: "Bonnet Mickey",
                description: "Un bonnet à l'effigie de Mickey Mouse. Pour garçons et filles",
                currentPrice: 5.9
            },
            {
                id: 2,
                companyId: 0,
                reference: "PU001",
                model: "8 ans vert",
                name: "Pull el laine Defrost",
                description: null,
                currentPrice: 21.5
            },
            {
                id: 3,
                companyId: 0,
                reference: "PU002",
                model: "8 ans rouge",
                name: "Pull en laine Defrost",
                description: null,
                currentPrice: 21.5
            },
            {
                id: 4,
                companyId: 0,
                reference: "PU003",
                model: "10-12 ans vert",
                name: "Pull en laine Defrost",
                description: null,
                currentPrice: 21.5
            },
            {
                id: 5,
                companyId: 0,
                reference: "PU004",
                model: "12-12 ans rouge",
                name: "Pull en laine Defrost",
                description: null,
                currentPrice: 21.5
            },
            {
                id: 6,
                companyId: 0,
                reference: "JDA001",
                model: "8 ans rouge",
                name: "T-shirt joli",
                description: "Un joli T-shirt rouge",
                currentPrice: 6
            },
            {
                id: 7,
                companyId: 0,
                reference: "JDA002",
                model: "10-12 ans rouge",
                name: "T-shirt joli",
                description: "Un joli T-shirt rouge",
                currentPrice: 6
            },
            {
                id: 8,
                companyId: 0,
                reference: "JDA003",
                model: "S rouge",
                name: "T-shirt joli",
                description: "Un joli T-shirt rouge",
                currentPrice: 6
            },
            {
                id: 9,
                companyId: 0,
                reference: "JDA004",
                model: "M rouge",
                name: "T-shirt joli",
                description: "Un joli T-shirt rouge",
                currentPrice: 6
            }
        ];
        this.items = new Array();
        var thisService = this;
        allItems.forEach(function (itemParams) {
            var item = new Item(itemParams);
            thisService.items.push(item);
        });
    };
    return ItemService;
})();
exports.ItemService = ItemService;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2VzL2l0ZW1TZXJ2aWNlLnRzIl0sIm5hbWVzIjpbIkl0ZW0iLCJJdGVtLmNvbnN0cnVjdG9yIiwiSXRlbS5lcXVhbHMiLCJJdGVtU2VydmljZSIsIkl0ZW1TZXJ2aWNlLmNvbnN0cnVjdG9yIiwiSXRlbVNlcnZpY2Uuc2VhcmNoSXRlbXMiLCJJdGVtU2VydmljZS5hZGRJdGVtIiwiSXRlbVNlcnZpY2UucmVtb3ZlSXRlbSIsIkl0ZW1TZXJ2aWNlLmdldEl0ZW1zIiwiSXRlbVNlcnZpY2UuZ2V0SXRlbSIsIkl0ZW1TZXJ2aWNlLmZpbmRJdGVtcyIsIkl0ZW1TZXJ2aWNlLmZpbGxEZWZhdWx0SXRlbXMiXSwibWFwcGluZ3MiOiJBQUFBOztHQUVHO0FBRUg7SUFTSUEsY0FBWUEsTUFBTUE7UUFDZEMsRUFBRUEsQ0FBQ0EsQ0FBQ0EsTUFBTUEsSUFBSUEsU0FBU0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDdEJBLElBQUlBLENBQUNBLEVBQUVBLEdBQUdBLE1BQU1BLENBQUNBLEVBQUVBLENBQUNBO1lBQ3BCQSxJQUFJQSxDQUFDQSxTQUFTQSxHQUFHQSxNQUFNQSxDQUFDQSxTQUFTQSxDQUFDQTtZQUNsQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBR0EsTUFBTUEsQ0FBQ0EsU0FBU0EsQ0FBQ0E7WUFDbENBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLE1BQU1BLENBQUNBLEtBQUtBLENBQUNBO1lBQzFCQSxJQUFJQSxDQUFDQSxJQUFJQSxHQUFHQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQTtZQUN4QkEsSUFBSUEsQ0FBQ0EsV0FBV0EsR0FBR0EsTUFBTUEsQ0FBQ0EsV0FBV0EsQ0FBQ0E7WUFDdENBLElBQUlBLENBQUNBLFlBQVlBLEdBQUdBLE1BQU1BLENBQUNBLFlBQVlBLENBQUNBO1FBQzVDQSxDQUFDQTtJQUNMQSxDQUFDQTtJQUNERCxxQkFBTUEsR0FBTkEsVUFBT0EsS0FBV0E7UUFDZEUsRUFBRUEsQ0FBQ0EsQ0FBQ0EsSUFBSUEsQ0FBQ0EsRUFB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QSxTQUFTQSxFQUFFQSxDQUFDQTtnQkFDWkEsU0FBU0EsRUFBRUEsUUFBUUE7Z0JBQ25CQSxLQUFLQSxFQUFFQSxTQUFTQTtnQkFDaEJBLElBQUlBLEVBQUVBLGNBQWNBO2dCQUNwQkEsV0FBV0EsRUFBRUEsdUJBQXVCQTtnQkFDcENBLFlBQVlBLEVBQUVBLENBQUNBO2FBQ2xCQTtZQUNEQTtnQkFDSUEsRUFBRUEsRUFBRUEsQ0FBQ0E7Z0JBQ0xBLFNBQVNBLEVBQUVBLENBQUNBO2dCQUNaQSxTQUFTQSxFQUFFQSxRQUFRQTtnQkFDbkJBLEtBQUtBLEVBQUVBLFNBQVNBO2dCQUNoQkEsSUFBSUEsRUFBRUEsY0FBY0E7Z0JBQ3BCQSxXQUFXQSxFQUFFQSx1QkFBdUJBO2dCQUNwQ0EsWUFBWUEsRUFBRUEsQ0FBQ0E7YUFDbEJBO1NBQ0pBLENBQUNBO1FBQ0ZBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLElBQUlBLEtBQUtBLEVBQVFBLENBQUNBO1FBQy9CQSxJQUFJQSxXQUFXQSxHQUFHQSxJQUFJQSxDQUFDQTtRQUN2QkEsUUFBUUEsQ0FBQ0EsT0FBT0EsQ0FBQ0EsVUFBU0EsVUFBVUE7WUFDaEMsSUFBSSxJQUFJLEdBQUcsSUFBSSxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7WUFDaEMsV0FBVyxDQUFDLEtBQUssQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDakMsQ0FBQyxDQUFDQSxDQUFDQTtJQUNQQSxDQUFDQTtJQUNMUixrQkFBQ0E7QUFBREEsQ0FuSkEsQUFtSkNBLElBQUE7QUFuSlksbUJBQVcsY0FtSnZCLENBQUEiLCJmaWxlIjoic2VydmljZXMvaXRlbVNlcnZpY2UuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENyZWF0ZWQgYnkgY2doaXNsYWkgb24gMjkvMDcvMTUuXG4gKi9cblxuZXhwb3J0IGNsYXNzIEl0ZW0ge1xuICAgIGlkOiBudW1iZXI7XG4gICAgY29tcGFueUlkOiBudW1iZXI7XG4gICAgcmVmZXJlbmNlOiBzdHJpbmc7XG4gICAgbW9kZWw6IHN0cmluZztcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcbiAgICBjdXJyZW50UHJpY2U6IG51bWJlcjtcblxuICAgIGNvbnN0cnVjdG9yKHBhcmFtcykge1xuICAgICAgICBpZiAocGFyYW1zICE9IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5pZCA9IHBhcmFtcy5pZDtcbiAgICAgICAgICAgIHRoaXMuY29tcGFueUlkID0gcGFyYW1zLmNvbXBhbnlJZDtcbiAgICAgICAgICAgIHRoaXMucmVmZXJlbmNlID0gcGFyYW1zLnJlZmVyZW5jZTtcbiAgICAgICAgICAgIHRoaXMubW9kZWwgPSBwYXJhbXMubW9kZWw7XG4gICAgICAgICAgICB0aGlzLm5hbWUgPSBwYXJhbXMubmFtZTtcbiAgICAgICAgICAgIHRoaXMuZGVzY3JpcHRpb24gPSBwYXJhbXMuZGVzY3JpcHRpb247XG4gICAgICAgICAgICB0aGlzLmN1cnJlbnRQcmljZSA9IHBhcmFtcy5jdXJyZW50UHJpY2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgZXF1YWxzKG90aGVyOiBJdGVtKSB7XG4gICAgICAgIGlmICh0aGlzLmlkID09IHVuZGVmaW5lZCB8fCBvdGhlci5pZCA9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdGhpcy5pZCA9PSBvdGhlci5pZDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBJdGVtU2VydmljZSB7XG4gICAgaXRlbXM6IEl0ZW1bXTtcblxuICAgIHNlYXJjaEl0ZW1zKCkge1xuICAgICAgICB0aGlzLml0ZW1zID0gW107XG4gICAgICAgIHRoaXMuZmlsbERlZmF1bHRJdGVtcygpO1xuICAgIH1cbiAgICBhZGRJdGVtKGl0ZW06IEl0ZW0pIHtcbiAgICAgICAgdGhpcy5pdGVtcy5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgICByZW1vdmVJdGVtKGl0ZW06IEl0ZW0pIHtcbiAgICAgICAgdmFyIG9sZEl0ZW1zID0gdGhpcy5pdGVtcztcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgb2xkSXRlbXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICB2YXIgb2xkSXRlbSA9IG9sZEl0ZW1zW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChvbGRJdGVtLmVxdWFscyhpdGVtKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKG9sZEl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldEl0ZW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcztcbiAgICB9XG4gICAgZ2V0SXRlbShpZDogbnVtYmVyKSB7XG4gICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLml0ZW1zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLml0ZW1zW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChpdGVtLmlkID09IGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGZpbmRJdGVtcyhmaWx0ZXJWYWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIHZhciBmb3VuZEl0ZW1zID0gW107XG4gICAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtOiBJdGVtKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5yZWZlcmVuY2UuaW5kZXhPZihmaWx0ZXJWYWx1ZSk9PSAwKSB7XG4gICAgICAgICAgICAgICAgZm91bmRJdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLm5hbWUuaW5kZXhPZihmaWx0ZXJWYWx1ZSkgPj0gMCkge1xuICAgICAgICAgICAgICAgIGZvdW5kSXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmb3VuZEl0ZW1zO1xuICAgIH1cbiAgICBmaWxsRGVmYXVsdEl0ZW1zKCkge1xuICAgICAgICB2YXIgYWxsSXRlbXMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6IDAsXG4gICAgICAgICAgICAgICAgY29tcGFueUlkOiAwLFxuICAgICAgICAgICAgICAgIHJlZmVyZW5jZTogXCJCTzAwMVwiLFxuICAgICAgICAgICAgICAgIG1vZGVsOiBudWxsLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiQm9ubmV0IE1pbm5pZVwiLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlVuIGJvbm5ldCDDoCBsJ2VmZmlnaWUgZGUgTWlubmllLCBsYSBjb3BpbmUgZGUgTWlja2V5LlwiLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQcmljZTogNS45XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgICAgIGNvbXBhbnlJZDogMCxcbiAgICAgICAgICAgICAgICByZWZlcmVuY2U6IFwiQk8wMDJcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogbnVsbCxcbiAgICAgICAgICAgICAgICBuYW1lOiBcIkJvbm5ldCBNaWNrZXlcIixcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJVbiBib25uZXQgw6AgbCdlZmZpZ2llIGRlIE1pY2tleSBNb3VzZS4gUG91ciBnYXLDp29ucyBldCBmaWxsZXNcIixcbiAgICAgICAgICAgICAgICBjdXJyZW50UHJpY2U6IDUuOVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZDogMixcbiAgICAgICAgICAgICAgICBjb21wYW55SWQ6IDAsXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlOiBcIlBVMDAxXCIsXG4gICAgICAgICAgICAgICAgbW9kZWw6IFwiOCBhbnMgdmVydFwiLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiUHVsbCBlbCBsYWluZSBEZWZyb3N0XCIsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsXG4gICAgICAgICAgICAgICAgY3VycmVudFByaWNlOiAyMS41XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiAzLFxuICAgICAgICAgICAgICAgIGNvbXBhbnlJZDogMCxcbiAgICAgICAgICAgICAgICByZWZlcmVuY2U6IFwiUFUwMDJcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogXCI4IGFucyByb3VnZVwiLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiUHVsbCBlbiBsYWluZSBEZWZyb3N0XCIsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsXG4gICAgICAgICAgICAgICAgY3VycmVudFByaWNlOiAyMS41XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiA0LFxuICAgICAgICAgICAgICAgIGNvbXBhbnlJZDogMCxcbiAgICAgICAgICAgICAgICByZWZlcmVuY2U6IFwiUFUwMDNcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogXCIxMC0xMiBhbnMgdmVydFwiLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiUHVsbCBlbiBsYWluZSBEZWZyb3N0XCIsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsXG4gICAgICAgICAgICAgICAgY3VycmVudFByaWNlOiAyMS41XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiA1LFxuICAgICAgICAgICAgICAgIGNvbXBhbnlJZDogMCxcbiAgICAgICAgICAgICAgICByZWZlcmVuY2U6IFwiUFUwMDRcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogXCIxMi0xMiBhbnMgcm91Z2VcIixcbiAgICAgICAgICAgICAgICBuYW1lOiBcIlB1bGwgZW4gbGFpbmUgRGVmcm9zdFwiLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQcmljZTogMjEuNVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZDogNixcbiAgICAgICAgICAgICAgICBjb21wYW55SWQ6IDAsXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlOiBcIkpEQTAwMVwiLFxuICAgICAgICAgICAgICAgIG1vZGVsOiBcIjggYW5zIHJvdWdlXCIsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJULXNoaXJ0IGpvbGlcIixcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJVbiBqb2xpIFQtc2hpcnQgcm91Z2VcIixcbiAgICAgICAgICAgICAgICBjdXJyZW50UHJpY2U6IDZcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6IDcsXG4gICAgICAgICAgICAgICAgY29tcGFueUlkOiAwLFxuICAgICAgICAgICAgICAgIHJlZmVyZW5jZTogXCJKREEwMDJcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogXCIxMC0xMiBhbnMgcm91Z2VcIixcbiAgICAgICAgICAgICAgICBuYW1lOiBcIlQtc2hpcnQgam9saVwiLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlVuIGpvbGkgVC1zaGlydCByb3VnZVwiLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQcmljZTogNlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZDogOCxcbiAgICAgICAgICAgICAgICBjb21wYW55SWQ6IDAsXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlOiBcIkpEQTAwM1wiLFxuICAgICAgICAgICAgICAgIG1vZGVsOiBcIlMgcm91Z2VcIixcbiAgICAgICAgICAgICAgICBuYW1lOiBcIlQtc2hpcnQgam9saVwiLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlVuIGpvbGkgVC1zaGlydCByb3VnZVwiLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQcmljZTogNlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZDogOSxcbiAgICAgICAgICAgICAgICBjb21wYW55SWQ6IDAsXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlOiBcIkpEQTAwNFwiLFxuICAgICAgICAgICAgICAgIG1vZGVsOiBcIk0gcm91Z2VcIixcbiAgICAgICAgICAgICAgICBuYW1lOiBcIlQtc2hpcnQgam9saVwiLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlVuIGpvbGkgVC1zaGlydCByb3VnZVwiLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQcmljZTogNlxuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuICAgICAgICB0aGlzLml0ZW1zID0gbmV3IEFycmF5PEl0ZW0+KCk7XG4gICAgICAgIHZhciB0aGlzU2VydmljZSA9IHRoaXM7XG4gICAgICAgIGFsbEl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbVBhcmFtcykge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBuZXcgSXRlbShpdGVtUGFyYW1zKTtcbiAgICAgICAgICAgIHRoaXNTZXJ2aWNlLml0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=