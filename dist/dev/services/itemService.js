/**
 * Created by cghislai on 29/07/15.
 */
var Item = (function () {
    function Item(params) {
        if (params != undefined) {
            this.id = params.id;
            this.companyId = params.companyId;
            this.reference = params.reference;
            this.model = params.model;
            this.name = params.name;
            this.description = params.description;
            this.currentPrice = params.currentPrice;
        }
    }
    Item.prototype.equals = function (other) {
        return this.id == other.id;
    };
    return Item;
})();
exports.Item = Item;
var ItemService = (function () {
    function ItemService() {
    }
    ItemService.prototype.searchItems = function () {
        this.items = [];
        this.fillDefaultItems();
    };
    ItemService.prototype.addItem = function (item) {
        this.items.push(item);
    };
    ItemService.prototype.removeItem = function (item) {
        var oldItems = this.items;
        this.items = [];
        for (var index = 0; index < oldItems.length; index++) {
            var oldItem = oldItems[index];
            if (oldItem.equals(item)) {
                continue;
            }
            this.items.push(oldItem);
        }
    };
    ItemService.prototype.getItems = function () {
        return this.items;
    };
    ItemService.prototype.getItem = function (id) {
        for (var index = 0; index < this.items.length; index++) {
            var item = this.items[index];
            if (item.id == id) {
                return item;
            }
        }
        return null;
    };
    ItemService.prototype.findItems = function (filterValue) {
        var foundItems = [];
        this.items.forEach(function (item) {
            if (item.reference.indexOf(filterValue) == 0) {
                foundItems.push(item);
                return;
            }
            if (item.name.indexOf(filterValue) >= 0) {
                foundItems.push(item);
                return;
            }
        });
        return foundItems;
    };
    ItemService.prototype.fillDefaultItems = function () {
        var allItems = [
            {
                id: 0,
                companyId: 0,
                reference: "BO001",
                model: null,
                name: "Bonnet Minnie",
                description: "Un bonnet à l'effigie de Minnie, la copine de Mickey.",
                currentPrice: 5.9
            },
            {
                id: 1,
                companyId: 0,
                reference: "BO002",
                model: null,
                name: "Bonnet Mickey",
                description: "Un bonnet à l'effigie de Mickey Mouse. Pour garçons et filles",
                currentPrice: 5.9
            },
            {
                id: 2,
                companyId: 0,
                reference: "PU001",
                model: "8 ans vert",
                name: "Pull el laine Defrost",
                description: null,
                currentPrice: 21.5
            },
            {
                id: 3,
                companyId: 0,
                reference: "PU002",
                model: "8 ans rouge",
                name: "Pull en laine Defrost",
                description: null,
                currentPrice: 21.5
            },
            {
                id: 4,
                companyId: 0,
                reference: "PU003",
                model: "10-12 ans vert",
                name: "Pull en laine Defrost",
                description: null,
                currentPrice: 21.5
            },
            {
                id: 5,
                companyId: 0,
                reference: "PU004",
                model: "12-12 ans rouge",
                name: "Pull en laine Defrost",
                description: null,
                currentPrice: 21.5
            },
            {
                id: 6,
                companyId: 0,
                reference: "JDA001",
                model: "8 ans rouge",
                name: "T-shirt joli",
                description: "Un joli T-shirt rouge",
                currentPrice: 6
            },
            {
                id: 7,
                companyId: 0,
                reference: "JDA002",
                model: "10-12 ans rouge",
                name: "T-shirt joli",
                description: "Un joli T-shirt rouge",
                currentPrice: 6
            },
            {
                id: 8,
                companyId: 0,
                reference: "JDA003",
                model: "S rouge",
                name: "T-shirt joli",
                description: "Un joli T-shirt rouge",
                currentPrice: 6
            },
            {
                id: 9,
                companyId: 0,
                reference: "JDA004",
                model: "M rouge",
                name: "T-shirt joli",
                description: "Un joli T-shirt rouge",
                currentPrice: 6
            }
        ];
        this.items = new Array();
        var thisService = this;
        allItems.forEach(function (itemParams) {
            var item = new Item(itemParams);
            thisService.items.push(item);
        });
    };
    return ItemService;
})();
exports.ItemService = ItemService;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNlcnZpY2VzL2l0ZW1TZXJ2aWNlLnRzIl0sIm5hbWVzIjpbIkl0ZW0iLCJJdGVtLmNvbnN0cnVjdG9yIiwiSXRlbS5lcXVhbHMiLCJJdGVtU2VydmljZSIsIkl0ZW1TZXJ2aWNlLmNvbnN0cnVjdG9yIiwiSXRlbVNlcnZpY2Uuc2VhcmNoSXRlbXMiLCJJdGVtU2VydmljZS5hZGRJdGVtIiwiSXRlbVNlcnZpY2UucmVtb3ZlSXRlbSIsIkl0ZW1TZXJ2aWNlLmdldEl0ZW1zIiwiSXRlbVNlcnZpY2UuZ2V0SXRlbSIsIkl0ZW1TZXJ2aWNlLmZpbmRJdGVtcyIsIkl0ZW1TZXJ2aWNlLmZpbGxEZWZhdWx0SXRlbXMiXSwibWFwcGluZ3MiOiJBQUFBOztHQUVHO0FBRUg7SUFTSUEsY0FBWUEsTUFBTUE7UUFDZEMsRUFBRUEsQ0FBQ0EsQ0FBQ0EsTUFBTUEsSUFBSUEsU0FBU0EsQ0FBQ0EsQ0FBQ0EsQ0FBQ0E7WUFDdEJBLElBQUlBLENBQUNBLEVBQUVBLEdBQUdBLE1BQU1BLENBQUNBLEVBQUVBLENBQUNBO1lBQ3BCQSxJQUFJQSxDQUFDQSxTQUFTQSxHQUFHQSxNQUFNQSxDQUFDQSxTQUFTQSxDQUFDQTtZQUNsQ0EsSUFBSUEsQ0FBQ0EsU0FBU0EsR0FBR0EsTUFBTUEsQ0FBQ0EsU0FBU0EsQ0FBQ0E7WUFDbENBLElBQUlBLENBQUNBLEtBQUtBLEdBQUdBLE1BQU1BLENBQUNBLEtBQUtBLENBQUNBO1lBQzFCQSxJQUFJQSxDQUFDQSxJQUFJQSxHQUFHQSxNQUFNQSxDQUFDQSxJQUFJQSxDQUFDQTtZQUN4QkEsSUFBSUEsQ0FBQ0EsV0FBV0EsR0FBR0EsTUFBTUEsQ0FBQ0EsV0FBV0EsQ0FBQ0E7WUFDdENBLElBQUlBLENBQUNBLFlBQVlBLEdBQUdBLE1BQU1BLENBQUNBLFlBQVlBLENBQUNBO1FBQzVDQSxDQUFDQTtJQUNMQSxDQUFDQTtJQUNERCxxQkFBTUEsR0FBTkEsVUFBT0EsS0FBV0E7UUFDZEUsTUFBTUEsQ0FBQ0EsSUFBSUEsQ0FBQ0EsRUFBRUEsSUFB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QUNsQkE7WUFDREE7Z0JBQ0lBLEVBQUVBLEVBQUVBLENBQUNBO2dCQUNMQSxTQUFTQSxFQUFFQSxDQUFDQTtnQkFDWkEsU0FBU0EsRUFBRUEsUUFBUUE7Z0JBQ25CQSxLQUFLQSxFQUFFQSxTQUFTQTtnQkFDaEJBLElBQUlBLEVBQUVBLGNBQWNBO2dCQUNwQkEsV0FBV0EsRUFBRUEsdUJBQXVCQTtnQkFDcENBLFlBQVlBLEVBQUVBLENBQUNBO2FBQ2xCQTtTQUNKQSxDQUFDQTtRQUNGQSxJQUFJQSxDQUFDQSxLQUFLQSxHQUFHQSxJQUFJQSxLQUFLQSxFQUFRQSxDQUFDQTtRQUMvQkEsSUFBSUEsV0FBV0EsR0FBR0EsSUFBSUEsQ0FBQ0E7UUFDdkJBLFFBQVFBLENBQUNBLE9BQU9BLENBQUNBLFVBQVNBLFVBQVVBO1lBQ2hDLElBQUksSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1lBQ2hDLFdBQVcsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2pDLENBQUMsQ0FBQ0EsQ0FBQ0E7SUFDUEEsQ0FBQ0E7SUFDTFIsa0JBQUNBO0FBQURBLENBbkpBLEFBbUpDQSxJQUFBO0FBbkpZLG1CQUFXLGNBbUp2QixDQUFBIiwiZmlsZSI6InNlcnZpY2VzL2l0ZW1TZXJ2aWNlLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IGNnaGlzbGFpIG9uIDI5LzA3LzE1LlxuICovXG5cbmV4cG9ydCBjbGFzcyBJdGVtIHtcbiAgICBpZDogbnVtYmVyO1xuICAgIGNvbXBhbnlJZDogbnVtYmVyO1xuICAgIHJlZmVyZW5jZTogc3RyaW5nO1xuICAgIG1vZGVsOiBzdHJpbmc7XG4gICAgbmFtZTogc3RyaW5nO1xuICAgIGRlc2NyaXB0aW9uOiBzdHJpbmc7XG4gICAgY3VycmVudFByaWNlOiBudW1iZXI7XG5cbiAgICBjb25zdHJ1Y3RvcihwYXJhbXMpIHtcbiAgICAgICAgaWYgKHBhcmFtcyAhPSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuaWQgPSBwYXJhbXMuaWQ7XG4gICAgICAgICAgICB0aGlzLmNvbXBhbnlJZCA9IHBhcmFtcy5jb21wYW55SWQ7XG4gICAgICAgICAgICB0aGlzLnJlZmVyZW5jZSA9IHBhcmFtcy5yZWZlcmVuY2U7XG4gICAgICAgICAgICB0aGlzLm1vZGVsID0gcGFyYW1zLm1vZGVsO1xuICAgICAgICAgICAgdGhpcy5uYW1lID0gcGFyYW1zLm5hbWU7XG4gICAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uID0gcGFyYW1zLmRlc2NyaXB0aW9uO1xuICAgICAgICAgICAgdGhpcy5jdXJyZW50UHJpY2UgPSBwYXJhbXMuY3VycmVudFByaWNlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGVxdWFscyhvdGhlcjogSXRlbSkge1xuICAgICAgICByZXR1cm4gdGhpcy5pZCA9PSBvdGhlci5pZDtcbiAgICB9XG59XG5cbmV4cG9ydCBjbGFzcyBJdGVtU2VydmljZSB7XG4gICAgaXRlbXM6IEl0ZW1bXTtcblxuICAgIHNlYXJjaEl0ZW1zKCkge1xuICAgICAgICB0aGlzLml0ZW1zID0gW107XG4gICAgICAgIHRoaXMuZmlsbERlZmF1bHRJdGVtcygpO1xuICAgIH1cbiAgICBhZGRJdGVtKGl0ZW06IEl0ZW0pIHtcbiAgICAgICAgdGhpcy5pdGVtcy5wdXNoKGl0ZW0pO1xuICAgIH1cbiAgICByZW1vdmVJdGVtKGl0ZW06IEl0ZW0pIHtcbiAgICAgICAgdmFyIG9sZEl0ZW1zID0gdGhpcy5pdGVtcztcbiAgICAgICAgdGhpcy5pdGVtcyA9IFtdO1xuICAgICAgICBmb3IgKHZhciBpbmRleCA9IDA7IGluZGV4IDwgb2xkSXRlbXMubGVuZ3RoOyBpbmRleCsrKSB7XG4gICAgICAgICAgICB2YXIgb2xkSXRlbSA9IG9sZEl0ZW1zW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChvbGRJdGVtLmVxdWFscyhpdGVtKSkge1xuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdGhpcy5pdGVtcy5wdXNoKG9sZEl0ZW0pO1xuICAgICAgICB9XG4gICAgfVxuICAgIGdldEl0ZW1zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5pdGVtcztcbiAgICB9XG4gICAgZ2V0SXRlbShpZDogbnVtYmVyKSB7XG4gICAgICAgIGZvciAodmFyIGluZGV4ID0gMDsgaW5kZXggPCB0aGlzLml0ZW1zLmxlbmd0aDsgaW5kZXgrKykge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSB0aGlzLml0ZW1zW2luZGV4XTtcbiAgICAgICAgICAgIGlmIChpdGVtLmlkID09IGlkKSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGl0ZW07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuICAgIGZpbmRJdGVtcyhmaWx0ZXJWYWx1ZTogc3RyaW5nKSB7XG4gICAgICAgIHZhciBmb3VuZEl0ZW1zID0gW107XG4gICAgICAgIHRoaXMuaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtOiBJdGVtKSB7XG4gICAgICAgICAgICBpZiAoaXRlbS5yZWZlcmVuY2UuaW5kZXhPZihmaWx0ZXJWYWx1ZSk9PSAwKSB7XG4gICAgICAgICAgICAgICAgZm91bmRJdGVtcy5wdXNoKGl0ZW0pO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChpdGVtLm5hbWUuaW5kZXhPZihmaWx0ZXJWYWx1ZSkgPj0gMCkge1xuICAgICAgICAgICAgICAgIGZvdW5kSXRlbXMucHVzaChpdGVtKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBmb3VuZEl0ZW1zO1xuICAgIH1cbiAgICBmaWxsRGVmYXVsdEl0ZW1zKCkge1xuICAgICAgICB2YXIgYWxsSXRlbXMgPSBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6IDAsXG4gICAgICAgICAgICAgICAgY29tcGFueUlkOiAwLFxuICAgICAgICAgICAgICAgIHJlZmVyZW5jZTogXCJCTzAwMVwiLFxuICAgICAgICAgICAgICAgIG1vZGVsOiBudWxsLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiQm9ubmV0IE1pbm5pZVwiLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlVuIGJvbm5ldCDDoCBsJ2VmZmlnaWUgZGUgTWlubmllLCBsYSBjb3BpbmUgZGUgTWlja2V5LlwiLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQcmljZTogNS45XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgICAgIGNvbXBhbnlJZDogMCxcbiAgICAgICAgICAgICAgICByZWZlcmVuY2U6IFwiQk8wMDJcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogbnVsbCxcbiAgICAgICAgICAgICAgICBuYW1lOiBcIkJvbm5ldCBNaWNrZXlcIixcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJVbiBib25uZXQgw6AgbCdlZmZpZ2llIGRlIE1pY2tleSBNb3VzZS4gUG91ciBnYXLDp29ucyBldCBmaWxsZXNcIixcbiAgICAgICAgICAgICAgICBjdXJyZW50UHJpY2U6IDUuOVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZDogMixcbiAgICAgICAgICAgICAgICBjb21wYW55SWQ6IDAsXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlOiBcIlBVMDAxXCIsXG4gICAgICAgICAgICAgICAgbW9kZWw6IFwiOCBhbnMgdmVydFwiLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiUHVsbCBlbCBsYWluZSBEZWZyb3N0XCIsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsXG4gICAgICAgICAgICAgICAgY3VycmVudFByaWNlOiAyMS41XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiAzLFxuICAgICAgICAgICAgICAgIGNvbXBhbnlJZDogMCxcbiAgICAgICAgICAgICAgICByZWZlcmVuY2U6IFwiUFUwMDJcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogXCI4IGFucyByb3VnZVwiLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiUHVsbCBlbiBsYWluZSBEZWZyb3N0XCIsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsXG4gICAgICAgICAgICAgICAgY3VycmVudFByaWNlOiAyMS41XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiA0LFxuICAgICAgICAgICAgICAgIGNvbXBhbnlJZDogMCxcbiAgICAgICAgICAgICAgICByZWZlcmVuY2U6IFwiUFUwMDNcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogXCIxMC0xMiBhbnMgdmVydFwiLFxuICAgICAgICAgICAgICAgIG5hbWU6IFwiUHVsbCBlbiBsYWluZSBEZWZyb3N0XCIsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246IG51bGwsXG4gICAgICAgICAgICAgICAgY3VycmVudFByaWNlOiAyMS41XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIGlkOiA1LFxuICAgICAgICAgICAgICAgIGNvbXBhbnlJZDogMCxcbiAgICAgICAgICAgICAgICByZWZlcmVuY2U6IFwiUFUwMDRcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogXCIxMi0xMiBhbnMgcm91Z2VcIixcbiAgICAgICAgICAgICAgICBuYW1lOiBcIlB1bGwgZW4gbGFpbmUgRGVmcm9zdFwiLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBudWxsLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQcmljZTogMjEuNVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZDogNixcbiAgICAgICAgICAgICAgICBjb21wYW55SWQ6IDAsXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlOiBcIkpEQTAwMVwiLFxuICAgICAgICAgICAgICAgIG1vZGVsOiBcIjggYW5zIHJvdWdlXCIsXG4gICAgICAgICAgICAgICAgbmFtZTogXCJULXNoaXJ0IGpvbGlcIixcbiAgICAgICAgICAgICAgICBkZXNjcmlwdGlvbjogXCJVbiBqb2xpIFQtc2hpcnQgcm91Z2VcIixcbiAgICAgICAgICAgICAgICBjdXJyZW50UHJpY2U6IDZcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgaWQ6IDcsXG4gICAgICAgICAgICAgICAgY29tcGFueUlkOiAwLFxuICAgICAgICAgICAgICAgIHJlZmVyZW5jZTogXCJKREEwMDJcIixcbiAgICAgICAgICAgICAgICBtb2RlbDogXCIxMC0xMiBhbnMgcm91Z2VcIixcbiAgICAgICAgICAgICAgICBuYW1lOiBcIlQtc2hpcnQgam9saVwiLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlVuIGpvbGkgVC1zaGlydCByb3VnZVwiLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQcmljZTogNlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZDogOCxcbiAgICAgICAgICAgICAgICBjb21wYW55SWQ6IDAsXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlOiBcIkpEQTAwM1wiLFxuICAgICAgICAgICAgICAgIG1vZGVsOiBcIlMgcm91Z2VcIixcbiAgICAgICAgICAgICAgICBuYW1lOiBcIlQtc2hpcnQgam9saVwiLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlVuIGpvbGkgVC1zaGlydCByb3VnZVwiLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQcmljZTogNlxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICBpZDogOSxcbiAgICAgICAgICAgICAgICBjb21wYW55SWQ6IDAsXG4gICAgICAgICAgICAgICAgcmVmZXJlbmNlOiBcIkpEQTAwNFwiLFxuICAgICAgICAgICAgICAgIG1vZGVsOiBcIk0gcm91Z2VcIixcbiAgICAgICAgICAgICAgICBuYW1lOiBcIlQtc2hpcnQgam9saVwiLFxuICAgICAgICAgICAgICAgIGRlc2NyaXB0aW9uOiBcIlVuIGpvbGkgVC1zaGlydCByb3VnZVwiLFxuICAgICAgICAgICAgICAgIGN1cnJlbnRQcmljZTogNlxuICAgICAgICAgICAgfVxuICAgICAgICBdO1xuICAgICAgICB0aGlzLml0ZW1zID0gbmV3IEFycmF5PEl0ZW0+KCk7XG4gICAgICAgIHZhciB0aGlzU2VydmljZSA9IHRoaXM7XG4gICAgICAgIGFsbEl0ZW1zLmZvckVhY2goZnVuY3Rpb24oaXRlbVBhcmFtcykge1xuICAgICAgICAgICAgdmFyIGl0ZW0gPSBuZXcgSXRlbShpdGVtUGFyYW1zKTtcbiAgICAgICAgICAgIHRoaXNTZXJ2aWNlLml0ZW1zLnB1c2goaXRlbSk7XG4gICAgICAgIH0pO1xuICAgIH1cbn0iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=