<div class="pageContent">
    <h1 class="pageTitle">Historique des ventes</h1>

    <div class="topActions">
        <div class="from-date-filter">
            <label for="from-date-field">Ã€ partir du:</label>
            <input type="date" id="from-date-field"
                   [(ngModel)]="fromDateString">
        </div>
        <div class="to-date-filter">
            <label for="to-date-field">Jusqu'au:</label>
            <input type="date" id="to-date-field"
                   [(ngModel)]="toDateString">
        </div>
        <div class="customer-filter">
            <label for="customer-select">Client:</label>
            <customer-select-input
                    id="customer-select"
                    [selectedCustomer]="customerSearchCustomer"
                    [autoFocus]="false"
                    (customerSelected)="onCustomerSelected($event)"
            ></customer-select-input>
            <span class="actionlink red"
                  [hidden]="searchRequest.search.customerRef == null">
                <i class="fa fa-minus red"
                   title="Supprimer"
                   (click)="onCustomerRemoved()"></i>
            </span>
        </div>
        <div class="boxedHoverableLink"
             (click)="onSearchClicked()">
            Rechercher
        </div>
    </div>

    <paginator *ngIf="searchResult != null"
               [totalCount]="searchResult.count"
               [pageSize]="salesPerPage" [activePage]="searchRequest.pagination.pageIndex"
               [showPrevNextLink]="true" [showFirstLastLink]="true"
               (pageChange)="onPageChanged($event)"></paginator>
    <sale-list [sales]="searchResult.list"
               [columns]="columns"
               [rowSelectable]="true"
               [headersVisible]="true"
               (saleClicked)="onSaleClicked($event)"
               (columnAction)="onColumnAction($event)">
    </sale-list>

    <div class="total-payed">
        Total des {{ searchResult.count}} ventes: {{ totalPayedPrice.base | currency:'EUR':true:'.2-2' }}
    </div>
</div>
