<div class="formPage">
    <h1>Édition de la variante</h1>

    <form #itemForm="form" class="formTable"
          (ng-submit)="doSaveItem()"
          *ng-if="itemModel != undefined"
          enctype="multipart/form-data">

        <div>
            <label for="picture">Image</label>
            <img [src]="itemModel.pictureDataURI" class="itemPicture medium"
                 *ng-if="itemModel.pictureDataURI != undefined">
            <input type="file" id="picture" accept="image/*"
                   (change)="onPictureFileSelected($event)">
        </div>
        <div>
            <label for="language">Langue</label>
            <langSelect id="language"
                        [display-locale]="language.locale"
                        [selected-language]="itemModel.language"
                        (language-changed)="itemModel.language = $event"></langSelect>
        </div>
        <div>
            <label for="reference">Référence:</label>
            <input type="text" id="reference" required
                   [(ng-model)]="itemModel.reference">
        </div>
        <div>
            <label for="name">Nom:</label>
            <input type="text" id="name" required
                   localized [language]="itemModel.language"
                   [locale-texts]="itemModel.names">
        </div>
        <div>
            <label for="description">Description:</label>
            <textarea type="text" id="description" rows="3"
                      localized [language]="itemModel.language"
                      [locale-texts]="itemModel.descriptions"></textarea>
        </div>
        <div>
            <label for="price">Prix:</label>
            <span>
                <input class="number" type="number" required
                       min="0" step="0.01" id="price"
                       [ng-model]="itemModel.vatExclusive | number:'.2-2'"
                       (change)="onCurrentPriceChanged($event)">
                €
            </span>
        </div>
        <div>
            <label for="vat">TVA:</label>
            <span>
                <input class="number" type="number" required
                       min="0" max="100" step="0.01" id="vat"
                       [ng-model]="itemModel.vatPercentage | number:'.0'"
                       (change)="onVatChanged($event)">
                %
                </span>
        </div>

        <div class="actions">
            <button type="submit" [disabled]="!itemForm.valid">Enregistrer</button>
            <a [router-link]="['/items/list']">Annuler</a>
        </div>
    </form>
</div>