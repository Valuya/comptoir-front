<div class="pageContent">
    <h1 class="pageTitle">Édition du produit</h1>

    <form #f="form"
          (ng-submit)="doSaveItem()"
          *ng-if="item != null"
          enctype="multipart/form-data">

        <div class="table">
            <div>
                <label for="picture">Image</label>
                <div>
                    <img [src]="item.mainPicture.dataURI"
                         class="itemPicturePreview"
                         *ng-if="item.mainPicture?.dataURI != null">
                    <input type="file" id="picture" accept="image/*"
                           (change)="onPictureFileSelected($event)">
                </div>
            </div>
            <div>
                <label>Langue</label>
                <langSelect [display-locale]="appLocale"
                            [selected-language]="editLanguage"
                            (language-changed)="editLanguage = $event"></langSelect>
            </div>
            <div>
                <label for="reference">Référence</label>
                <input type="text" id="reference" required
                       [(ng-model)]="item.reference">
            </div>
            <div>
                <label for="name">Nom</label>
                <input type="text" id="name" required
                       localized [language]="editLanguage"
                       [locale-texts]="item.name">
            </div>
            <div>
                <label for="description">Description</label>
                <textarea type="text" id="description" rows="3"
                          localized [language]="editLanguage"
                          [locale-texts]="item.description"></textarea>
            </div>
            <div>
                <label for="price">Prix</label>
                <span>
                    <input class="number" type="number" required
                           min="0" step="0.01" id="price" size="5"
                           [ng-model]="item.vatExclusive | number:'.2-2'"
                           (change)="onCurrentPriceChanged($event)">
                    €
                </span>
            </div>
            <div>
                <label for="vat">TVA</label>
                <div>
                    <input class="number" type="number" required
                           min="0" max="100" step="0.01" id="vat" size="5"
                           [ng-model]="(item.vatRate * 100) | number:'.0'"
                           (change)="onVatChanged($event)">
                    %
                </div>
            </div>
        </div>

        <div class="actions">
            <button type="submit" [disabled]="!f.form.valid">Enregistrer</button>
        </div>
    </form>
</div>