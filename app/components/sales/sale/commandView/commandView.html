<div class="commandView">
    <command-view-header [noInput]="noInput"
                         [validated]="validated || noInput "
                         (reopenClicked)="onReopenClicked()"
                         (validateChanged)="onValidateChanged($event)"></command-view-header>

    <item-variant-sale-list [rowSelectable]="false"
                            [headersVisible]="true"
                            [footerVisible]="true"
                            [footerTotalColIndex]="3"
                            [columns]="variantSaleColumns"
                            [itemVariantSaleList]="activeSaleService.saleItemsResult.list"
                            [editable]="!validated"
                            [actionsVisible]="!validated && !noInput"
                            [sale]="activeSaleService.sale"
                            (columnAction)="onColumnAction($event)"
                            (variantUpdated)="onVariantUpdated($event)"></item-variant-sale-list>

    <form class="sale-form sale-reference">
        <label for="saleReference">Référence</label>
        <div class="output-field reference"
             id="saleReference"
             (click)="onEditRefClicked()"
             [hidden]="editingReference">
            {{activeSaleService.sale.reference}}
        </div>
        <div [hidden]="noInput || !editingReference">
            <textarea [(ngModel)]="newSaleReference"
                      id="editSaleReference"
                      class="edit-reference-area"
                      autofocus></textarea>
            <span class="editActions">
                        <i class="fa fa-check green" (click)="onConfirmNewReference()"></i>
                        <i class="fa fa-times red" (click)="onCancelNewReference()"></i>
            </span>
        </div>
    </form>
    <form class="sale-form sale-time" [hidden]="newSale">
        <label for="saleTime">Date</label>
        <div class="output-field time" id="saleTime"
             (click)="onEditTimeClicked()"
             [hidden]="editingDateTime">
            {{ activeSaleService.sale.dateTime | date:'dd/MM/yyyy HH:mm' }}
        </div>
        <div [hidden]="noInput || !editingDateTime">
            <input type="datetime-local" autofocus
                   [(ngModel)]="newSaleDateTimeString"
                   class="edit-time-field">
            <span class="editActions">
                        <i class="fa fa-check green" (click)="onConfirmNewDateTime()"></i>
                        <i class="fa fa-times red" (click)="onCancelNewDateTime()"></i>
            </span>
        </div>
    </form>
</div>